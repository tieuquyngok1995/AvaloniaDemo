<UserControl
  x:Class="ConfigGenerator.Views.MainView"
  xmlns="https://github.com/avaloniaui"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:converters="clr-namespace:ConfigGenerator.Converters"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:models="clr-namespace:ConfigGenerator.Models"
  xmlns:vm="clr-namespace:ConfigGenerator.ViewModels"
  d:DesignHeight="600"
  d:DesignWidth="800"
  x:DataType="vm:MainViewModel"
  mc:Ignorable="d">

  <Design.DataContext>
    <!--  // これはIDEのプレビュー用のDataContextを設定するだけで、実行時のDataContextはコード（App.axaml.csなど）で設定する必要がある  -->
    <vm:MainViewModel />
  </Design.DataContext>

  <Grid RowDefinitions="auto, *">
    <Border Grid.Row="0" Height="36">
      <TextBlock
        Margin="12,0"
        VerticalAlignment="Center"
        FontSize="20"
        Text="{Binding Title, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}" />
    </Border>

    <SplitView
      Grid.Row="1"
      Background="#f3f3f3"
      CompactPaneLength="48"
      DisplayMode="CompactInline"
      IsPaneOpen="{Binding IsPaneOpen}"
      OpenPaneLength="240"
      PaneBackground="#f3f3f3">
      <SplitView.Pane>
        <StackPanel
          HorizontalAlignment="Stretch"
          VerticalAlignment="Top"
          Orientation="Vertical">
          <Button
            Width="32"
            MinWidth="32"
            MaxWidth="36"
            Margin="6,6,6,0"
            HorizontalAlignment="Left"
            Command="{Binding TriggerPaneCommand}">
            <PathIcon
              Width="16"
              Height="16"
              Data="{StaticResource LineHorizontal3Regular}" />
          </Button>
          <ListBox
            Width="{Binding IsPaneOpen, Converter={x:Static converters:TypeConverters.MenuPaneWidthConverter}}"
            Margin="0,-1"
            Padding="4"
            Classes.paneOpen="{Binding IsPaneOpen}"
            ItemsSource="{Binding MenuItems}"
            SelectedItem="{Binding SelectedMenuItem}">
            <ListBox.Styles>
              <Style Selector="ListBoxItem">
                <Setter Property="Padding" Value="8 0" />
                <Setter Property="Margin" Value="48 1" />
              </Style>

              <Style Selector="ListBox.paneOpen ListBoxItem">
                <Setter Property="Padding" Value="12 0" />
                <Setter Property="Margin" Value="30 1" />
              </Style>
            </ListBox.Styles>
            <ListBox.ItemTemplate>
              <DataTemplate DataType="{x:Type models:NavigationMenuItem}">
                <StackPanel Orientation="Horizontal" Spacing="12">
                  <PathIcon Width="16" Data="{Binding IconKey, Converter={x:Static converters:TypeConverters.IconConverter}}" />
                  <TextBlock
                    VerticalAlignment="Center"
                    FontSize="14"
                    Text="{Binding Label}" />
                </StackPanel>
              </DataTemplate>
            </ListBox.ItemTemplate>
          </ListBox>
        </StackPanel>
      </SplitView.Pane>

      <SplitView.Content>
        <Border Background="#ededed" CornerRadius="12 0 0 12">
          <DockPanel LastChildFill="True">
            <!--  Footer  -->
            <Border Padding="8" DockPanel.Dock="Bottom">
              <StackPanel
                HorizontalAlignment="Right"
                Orientation="Horizontal"
                Spacing="8">
                <Button
                  HorizontalAlignment="Stretch"
                  Classes="primary"
                  Content="連携用プログラムインストール" />
                <Button
                  HorizontalAlignment="Stretch"
                  Classes="primary"
                  Content="設定ファイルを生成し保存" />
                <Button
                  HorizontalAlignment="Stretch"
                  Classes="primary"
                  Content="過去に生成したファイル読込" />
                <Button
                  HorizontalAlignment="Stretch"
                  Classes="primary"
                  Content="サービス開始" />
                <Button
                  HorizontalAlignment="Stretch"
                  Classes="primary"
                  Content="サービス停止" />
              </StackPanel>
            </Border>

            <!--  Main view  -->
            <TransitioningContentControl Content="{Binding CurrentPage}" />

          </DockPanel>
        </Border>
      </SplitView.Content>
    </SplitView>

  </Grid>
</UserControl>
